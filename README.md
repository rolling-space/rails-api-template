# Rails API Template

An opinionated template for `rails new api_name --api`

## Usage

To initialize your new Rails API with the template, run

```
rails new api_name --api -m https://github.com/wscourge/rails-api-template/template.rb
```

## Insights

All stuff included in the freshly new Rails API

### All environments

- .dotenv
- dry-validation

### Development

- capistrano
- pry-byebug
- overcommit
- rspec-rails
- rubocop

### Test

- database_cleaner
- factory_bot_rails
- fuubar
- simplecov

### Development and Test

- brakeman
- bundler-audit
- fasterer
- ffaker
- pry-byebug
- rails_best_practices
- rails-controller-testing
- reek
- rspec-rails
- rubocop-rspec

### Services

Ready to use `app/services/` directory and services generator:

#### Simple services

Generating single service file:

```
rails g service CallDaddy
```

results in:

```
# app/services/my_call_daddy_service.rb

# frozen_string_literal: true

module Services
  class CallDaddy < ApplicationService
    def call

    end

    private

  end
end
```

and its rspec test file:

```
# spec/services/call_daddy_service_spec.rb

# frozen_string_literal: true

RSpec.describe Services::CallDaddyService do
  describe '#call' do

  end
end
```

#### Complex services in modules

Generating service nested in a module(s):

```
rails g service ImportantCalls/MyDaddy
```

results in:

```
# app/services/important_calls/my_daddy_service.rb

# frozen_string_literal: true

module Services
  module ImportantCalls
    class MyDaddy < ApplicationService
      def call

      end

      private

      end
    end
  end
end

```

and its rspec test file:

```
# spec/services/important_calls/my_daddy_service_spec.rb

# frozen_string_literal: true

RSpec.describe Services::ImportantCalls::MyDaddyService do
  describe '#call' do

  end
end
```

### CircleCI - TODO

CircleCI configuration is autogenerated in standard `.circleci/config`, and it
checks:

- brakeman
- bundler-audit
- fasterer
- rails_best_practices
- reek
- rspec
- rubocop
